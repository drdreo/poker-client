
language: node_js
node_js:
  - "10"

addons:
  chrome: stable

cache:
  directories:
    - ./node_modules
    - ~/.cache


jobs:
  include:
    - stage: Test
      env:
        - NODE_ENV=testing
      name: Frontend Tests
      install: cd client && npm ci
      script: npm run test -- --watch=false --no-progress --browsers=ChromeHeadlessCI
    - script: cd .. && npm start & wait-on http://localhost:3000 && cd client && npm start & wait-on http://localhost:4200 && npm run e2e
      install: cd client && npm ci
      name: E2E tests
    - script: npm run test
      name: Backend tests
